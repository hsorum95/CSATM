digraph "template" {
EC2Instance [label="EC2Instance\n<AWS::EC2::Instance>"];
WebHostStorage [label="WebHostStorage\n<AWS::EC2::Volume>"];
EBSAttachment [label="EBSAttachment\n<AWS::EC2::VolumeAttachment>"];
WebNodeSG [label="WebNodeSG\n<AWS::EC2::SecurityGroup>"];
WebVPC [label="WebVPC\n<AWS::EC2::VPC>"];
WebSubnet [label="WebSubnet\n<AWS::EC2::Subnet>"];
WebSubnet2 [label="WebSubnet2\n<AWS::EC2::Subnet>"];
WebIGW [label="WebIGW\n<AWS::EC2::InternetGateway>"];
InternetGatewayAttachment [label="InternetGatewayAttachment\n<AWS::EC2::VPCGatewayAttachment>"];
WebRTB [label="WebRTB\n<AWS::EC2::RouteTable>"];
WebDefaultPublicRoute [label="WebDefaultPublicRoute\n<AWS::EC2::Route>"];
RTBAssoc [label="RTBAssoc\n<AWS::EC2::SubnetRouteTableAssociation>"];
RTBAssoc2 [label="RTBAssoc2\n<AWS::EC2::SubnetRouteTableAssociation>"];
WebENI [label="WebENI\n<AWS::EC2::NetworkInterface>"];
VpcFlowLogs [label="VpcFlowLogs\n<AWS::EC2::FlowLog>"];
FlowBucket [label="FlowBucket\n<AWS::S3::Bucket>"];
User [label="User\n<AWS::IAM::User>"];
AccessKey [label="AccessKey\n<AWS::IAM::AccessKey>"];
UserPolicy [label="UserPolicy\n<AWS::IAM::Policy>"];
LogsKey [label="LogsKey\n<AWS::KMS::Key>"];
LogsKeyAlias [label="LogsKeyAlias\n<AWS::KMS::Alias>"];
DefaultDB [label="DefaultDB\n<AWS::RDS::DBInstance>"];
DefaultDBOptionGroup [label="DefaultDBOptionGroup\n<AWS::RDS::OptionGroup>"];
DefaultDBParameterGroup [label="DefaultDBParameterGroup\n<AWS::RDS::DBParameterGroup>"];
DefaultSubnetGroup [label="DefaultSubnetGroup\n<AWS::RDS::DBSubnetGroup>"];
DefaultSG [label="DefaultSG\n<AWS::EC2::SecurityGroup>"];
EC2Profile [label="EC2Profile\n<AWS::IAM::InstanceProfile>"];
EC2Role [label="EC2Role\n<AWS::IAM::Role>"];
EC2Policy [label="EC2Policy\n<AWS::IAM::Policy>"];
DBAppInstance [label="DBAppInstance\n<AWS::EC2::Instance>"];
IAM4Lambda [label="IAM4Lambda\n<AWS::IAM::Role>"];
AnalysisLambda [label="AnalysisLambda\n<AWS::Lambda::Function>"];
DataBucket [label="DataBucket\n<AWS::S3::Bucket>"];
FinancialsBucket [label="FinancialsBucket\n<AWS::S3::Bucket>"];
OperationsBucket [label="OperationsBucket\n<AWS::S3::Bucket>"];
DataScienceBucket [label="DataScienceBucket\n<AWS::S3::Bucket>"];
LogsBucket [label="LogsBucket\n<AWS::S3::Bucket>"];
CleanupRole [label="CleanupRole\n<AWS::IAM::Role>"];
CleanBucketFunction [label="CleanBucketFunction\n<AWS::Lambda::Function>"];
CleanFlowBucketOnDelete [label="CleanFlowBucketOnDelete\n<Custom::cleanupflowbucket>"];
CleanDataBucketOnDelete [label="CleanDataBucketOnDelete\n<Custom::cleanupdatabucket>"];
CleanFinancialsBucketOnDelete [label="CleanFinancialsBucketOnDelete\n<Custom::cleanupfinancialsbucket>"];
CleanOperationsBucketOnDelete [label="CleanOperationsBucketOnDelete\n<Custom::cleanupoperationsbucket>"];
CleanDataScienceBucketOnDelete [label="CleanDataScienceBucketOnDelete\n<Custom::cleanupdatasciencebucket>"];
CleanLogsBucketOnDelete [label="CleanLogsBucketOnDelete\n<Custom::cleanuplogsbucket>"];
EC2Instance -> WebNodeSG  [key=0, label=Ref];
EC2Instance -> WebSubnet  [key=0, label=Ref];
EBSAttachment -> EC2Instance  [key=0, label=Ref];
EBSAttachment -> WebHostStorage  [key=0, label=Ref];
WebNodeSG -> WebVPC  [key=0, label=Ref];
WebSubnet -> WebVPC  [key=0, label=Ref];
WebSubnet2 -> WebVPC  [key=0, label=Ref];
InternetGatewayAttachment -> WebIGW  [key=0, label=Ref];
InternetGatewayAttachment -> WebVPC  [key=0, label=Ref];
WebRTB -> WebVPC  [key=0, label=Ref];
WebDefaultPublicRoute -> InternetGatewayAttachment  [key=0, label=DependsOn];
WebDefaultPublicRoute -> WebRTB  [key=0, label=Ref];
WebDefaultPublicRoute -> WebIGW  [key=0, label=Ref];
RTBAssoc -> WebSubnet  [key=0, label=Ref];
RTBAssoc -> WebRTB  [key=0, label=Ref];
RTBAssoc2 -> WebSubnet2  [key=0, label=Ref];
RTBAssoc2 -> WebRTB  [key=0, label=Ref];
WebENI -> WebSubnet  [key=0, label=Ref];
VpcFlowLogs -> WebVPC  [key=0, label=Ref];
VpcFlowLogs -> FlowBucket  [key=0, label=GetAtt];
AccessKey -> User  [key=0, label=Ref];
UserPolicy -> User  [key=0, label=Ref];
LogsKeyAlias -> LogsKey  [key=0, label=Ref];
DefaultDB -> DefaultDBOptionGroup  [key=0, label=Ref];
DefaultDB -> DefaultDBParameterGroup  [key=0, label=Ref];
DefaultDB -> DefaultSubnetGroup  [key=0, label=Ref];
DefaultDB -> DefaultSG  [key=0, label=Ref];
DefaultSubnetGroup -> WebSubnet  [key=0, label=Ref];
DefaultSubnetGroup -> WebSubnet2  [key=0, label=Ref];
DefaultSG -> WebVPC  [key=0, label=Ref];
DefaultSG -> WebVPC  [key=1, label=GetAtt];
EC2Profile -> EC2Role  [key=0, label=Ref];
EC2Policy -> EC2Role  [key=0, label=Ref];
DBAppInstance -> EC2Profile  [key=0, label=Ref];
DBAppInstance -> WebNodeSG  [key=0, label=Ref];
DBAppInstance -> WebSubnet  [key=0, label=Ref];
DBAppInstance -> DefaultDB  [key=0, label=Sub];
DBAppInstance -> DefaultDB  [key=1, label=Sub];
DBAppInstance -> DefaultDB  [key=2, label=Sub];
AnalysisLambda -> IAM4Lambda  [key=0, label=GetAtt];
DataScienceBucket -> LogsBucket  [key=0, label=Ref];
LogsBucket -> LogsKey  [key=0, label=Ref];
CleanBucketFunction -> CleanupRole  [key=0, label=DependsOn];
CleanBucketFunction -> CleanupRole  [key=1, label=GetAtt];
CleanFlowBucketOnDelete -> FlowBucket  [key=0, label=Ref];
CleanFlowBucketOnDelete -> CleanBucketFunction  [key=0, label=GetAtt];
CleanDataBucketOnDelete -> DataBucket  [key=0, label=Ref];
CleanDataBucketOnDelete -> CleanBucketFunction  [key=0, label=GetAtt];
CleanFinancialsBucketOnDelete -> FinancialsBucket  [key=0, label=Ref];
CleanFinancialsBucketOnDelete -> CleanBucketFunction  [key=0, label=GetAtt];
CleanOperationsBucketOnDelete -> OperationsBucket  [key=0, label=Ref];
CleanOperationsBucketOnDelete -> CleanBucketFunction  [key=0, label=GetAtt];
CleanDataScienceBucketOnDelete -> DataScienceBucket  [key=0, label=Ref];
CleanDataScienceBucketOnDelete -> CleanBucketFunction  [key=0, label=GetAtt];
CleanLogsBucketOnDelete -> LogsBucket  [key=0, label=Ref];
CleanLogsBucketOnDelete -> CleanBucketFunction  [key=0, label=GetAtt];
}
